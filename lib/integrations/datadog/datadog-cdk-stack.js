"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DatadogStack = void 0;
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_secretsmanager_1 = require("aws-cdk-lib/aws-secretsmanager");
const datadog_cdk_constructs_v2_1 = require("datadog-cdk-constructs-v2");
function applyDefaultsToProps(props) {
    return Object.assign({}, props, {
        "nodeLayerVersion": 78,
        "pythonLayerVersion": 58,
        "extensionLayerVersion": 22,
        "enableDatadogTracing": true,
        "flushMetricsToLogs": true,
        "site": "datadoghq.com",
        "datadogEnv": "",
        "service": "",
        "datadogTags": "",
    });
}
class DatadogStack extends aws_cdk_lib_1.Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        props.apiKeySecretArn = aws_secretsmanager_1.Secret.fromSecretNameV2(this, 'APIKeySecret', props.apiKeySecret).secretFullArn;
        const propsWDefaults = applyDefaultsToProps(props);
        this.datadogCDK = new datadog_cdk_constructs_v2_1.Datadog(this, "DatadogIntegration", propsWDefaults);
        // datadogCDK.addLambdaFunctions([f])
    }
}
exports.DatadogStack = DatadogStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWRvZy1jZGstc3RhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRhZG9nLWNkay1zdGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw2Q0FBb0M7QUFDcEMsdUVBQXdEO0FBRXhELHlFQUFvRDtBQU1wRCxTQUFTLG9CQUFvQixDQUFDLEtBQXdCO0lBQ2xELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFO1FBQzVCLGtCQUFrQixFQUFFLEVBQUU7UUFDdEIsb0JBQW9CLEVBQUUsRUFBRTtRQUN4Qix1QkFBdUIsRUFBRSxFQUFFO1FBQzNCLHNCQUFzQixFQUFFLElBQUk7UUFDNUIsb0JBQW9CLEVBQUUsSUFBSTtRQUMxQixNQUFNLEVBQUUsZUFBZTtRQUN2QixZQUFZLEVBQUUsRUFBRTtRQUNoQixTQUFTLEVBQUUsRUFBRTtRQUNiLGFBQWEsRUFBRSxFQUFFO0tBQ3BCLENBQUMsQ0FBQTtBQUNOLENBQUM7QUFFRCxNQUFhLFlBQWEsU0FBUSxtQkFBSztJQUluQyxZQUFZLEtBQWdCLEVBQUUsRUFBVSxFQUFFLEtBQXdCO1FBQzlELEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRXhCLEtBQUssQ0FBQyxlQUFlLEdBQUcsMkJBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxhQUFhLENBQUE7UUFFdkcsTUFBTSxjQUFjLEdBQUcsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUE7UUFFbEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLG1DQUFPLENBQUMsSUFBSSxFQUFFLG9CQUFvQixFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBRTFFLHFDQUFxQztJQUN6QyxDQUFDO0NBQ0o7QUFmRCxvQ0FlQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YWNrIH0gZnJvbSBcImF3cy1jZGstbGliXCI7XG5pbXBvcnQgeyBTZWNyZXQgfSBmcm9tIFwiYXdzLWNkay1saWIvYXdzLXNlY3JldHNtYW5hZ2VyXCI7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tIFwiY29uc3RydWN0c1wiO1xuaW1wb3J0IHsgRGF0YWRvZyB9IGZyb20gXCJkYXRhZG9nLWNkay1jb25zdHJ1Y3RzLXYyXCI7XG5pbXBvcnQgeyBEYXRhZG9nU3RhY2tQcm9wcyB9IGZyb20gXCIuLi8uLi8uLi9pbnRlcmZhY2VzL2xpYi9pbnRlZ3JhdGlvbnMvZGF0YWRvZy9pbnRlZmFjZXNcIjtcblxudHlwZSBEYXRhZG9nU3RhY2tQcm9wc1dpdGhEZWZhdWx0cyA9IFJlcXVpcmVkPFBpY2s8RGF0YWRvZ1N0YWNrUHJvcHMsIFwibm9kZUxheWVyVmVyc2lvblwiIHwgXCJweXRob25MYXllclZlcnNpb25cIiB8IFwiZW5hYmxlRGF0YWRvZ1RyYWNpbmdcIiB8XG5cImZsdXNoTWV0cmljc1RvTG9nc1wiIHwgXCJzaXRlXCIgfCBcImRhdGFkb2dFbnZcIiB8IFwiZGF0YWRvZ1RhZ3NcIiA+PlxuXG5mdW5jdGlvbiBhcHBseURlZmF1bHRzVG9Qcm9wcyhwcm9wczogRGF0YWRvZ1N0YWNrUHJvcHMpOiBEYXRhZG9nU3RhY2tQcm9wc1dpdGhEZWZhdWx0cyB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICAgIFwibm9kZUxheWVyVmVyc2lvblwiOiA3OCxcbiAgICAgICAgXCJweXRob25MYXllclZlcnNpb25cIjogNTgsXG4gICAgICAgIFwiZXh0ZW5zaW9uTGF5ZXJWZXJzaW9uXCI6IDIyLFxuICAgICAgICBcImVuYWJsZURhdGFkb2dUcmFjaW5nXCI6IHRydWUsXG4gICAgICAgIFwiZmx1c2hNZXRyaWNzVG9Mb2dzXCI6IHRydWUsXG4gICAgICAgIFwic2l0ZVwiOiBcImRhdGFkb2docS5jb21cIixcbiAgICAgICAgXCJkYXRhZG9nRW52XCI6IFwiXCIsXG4gICAgICAgIFwic2VydmljZVwiOiBcIlwiLFxuICAgICAgICBcImRhdGFkb2dUYWdzXCI6IFwiXCIsXG4gICAgfSlcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFkb2dTdGFjayBleHRlbmRzIFN0YWNrIHtcblxuICAgIGRhdGFkb2dDREs6IERhdGFkb2dcblxuICAgIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBEYXRhZG9nU3RhY2tQcm9wcykge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcblxuICAgICAgICBwcm9wcy5hcGlLZXlTZWNyZXRBcm4gPSBTZWNyZXQuZnJvbVNlY3JldE5hbWVWMih0aGlzLCAnQVBJS2V5U2VjcmV0JywgcHJvcHMuYXBpS2V5U2VjcmV0KS5zZWNyZXRGdWxsQXJuXG5cbiAgICAgICAgY29uc3QgcHJvcHNXRGVmYXVsdHMgPSBhcHBseURlZmF1bHRzVG9Qcm9wcyhwcm9wcylcblxuICAgICAgICB0aGlzLmRhdGFkb2dDREsgPSBuZXcgRGF0YWRvZyh0aGlzLCBcIkRhdGFkb2dJbnRlZ3JhdGlvblwiLCBwcm9wc1dEZWZhdWx0cyk7XG5cbiAgICAgICAgLy8gZGF0YWRvZ0NESy5hZGRMYW1iZGFGdW5jdGlvbnMoW2ZdKVxuICAgIH1cbn0iXX0=